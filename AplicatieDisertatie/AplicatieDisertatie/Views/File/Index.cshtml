@model List<AplicatieDisertatie.Models.FileViewModel>

@{
	ViewBag.Title = "View Files";
	//Layout = "~/ Views / Shared / _Layout.cshtml";
	string color = "text-white";
}

<style>
	tr:nth-child(even) {
		background-color: #c2e6ed;
		color: black;
	}

	tr:nth-child(odd) {
		background-color: #56CC9D;
		color: white;
	}
</style>

<h2>Files</h2>

<div class="container">
	<table class="table">
		<tr style="background-color: #4aa48a !important;">
			<th style="color:white">
				@Html.DisplayName("Username")
			</th>
			<th style="color:white">
				@Html.DisplayName("File Name")
			</th>
			<th style="color:white">
				@Html.DisplayName("Updated On")
			</th>
			<th></th>
		</tr>

		@foreach (var item in Model)
		{
			<tr class="row_@(item.FileId)">
				<td>
					@Html.DisplayFor(modelItem => item.AspNetUser.UserName)
				</td>
				<td>
					@Html.DisplayFor(modelItem => item.FileName)
				</td>
				<td>
					@Html.DisplayFor(modelItem => item.UpdatedOn)
				</td>

				@if (color == "text-white")
				{
					color = "text-dark";
				}
				else
				{
					color = "text-white";
				}

				<td>
					@Html.ActionLink("Open", "OpenFile", new { id = item.FileId }, new { @class = color })
					@if (item.AuthorId == ViewBag.UserLogedId)
					{
						<text>|</text>
						@Html.ActionLink("Edit", "Edit", new { /* id=item.PrimaryKey */ }, new { @class = color }) |
						@Html.ActionLink("Delete", "Delete", null, null, new { @onclick = "DeleteFile(" + @item.FileId + ")", @href = "#", @class = color })
					@*<a href="#" class="btn btn-danger" onclick="DeleteFile('@item.FileId')">Delete</a>*@
					}
				</td>
			</tr>
}

	</table>

	@*Create a popup modal for delete confirmation*@
	<div class="modal fade" id="DeleteConfirmation">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h4 class="modal-title">Delete File</h4>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<h5>Are you sure you want to delete this file?</h5>
				</div>
				<div class="modal-footer">
					<a href="#" class="btn btn-success" onclick="ConfirmDelete()">Confirm</a>
					<a href="#" class="btn btn-danger" data-dismiss="modal">Cancel</a>
				</div>
			</div>
		</div>
	</div>
</div>


@section Scripts {
	@Scripts.Render("~/bundles/jqueryval")
	<script src="~/Scripts/MyScripts/DeleteFile.js"></script>
}

