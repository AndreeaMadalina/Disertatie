@model List<AplicatieDisertatie.Models.FileViewModel>

@{
	ViewBag.Title = "View Files";
	//Layout = "~/ Views / Shared / _Layout.cshtml";
}

<script src="https://ajax.aspnetcdn.com/ajax/jquery.validate/1.16.0/jquery.validate.min.js"></script>

<script src="https://ajax.aspnetcdn.com/ajax/jquery.validation.unobtrusive/3.2.6/jquery.validate.unobtrusive.min.js"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")"
		type="text/javascript">
</script>

<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")"
		type="text/javascript">
</script>

<h2>Files</h2>

<div class="container">
	<table class="table">
		<tr>
			<th>
				@Html.DisplayName("Username")
			</th>
			<th>
				@Html.DisplayName("File Name")
			</th>
			<th>
				@Html.DisplayName("Updated On")
			</th>
			<th></th>
		</tr>

		@foreach (var item in Model)
		{
			<tr class="row_@(item.FileId)">
				<td>
					@Html.DisplayFor(modelItem => item.AspNetUser.UserName)
				</td>
				<td>
					@Html.DisplayFor(modelItem => item.FileName)
				</td>
				<td>
					@Html.DisplayFor(modelItem => item.UpdatedOn)
				</td>
				<td>
					@Html.ActionLink("Open", "OpenFile", new { id = item.FileId }) |
					@Html.ActionLink("Edit", "Edit", new { /* id=item.PrimaryKey */ }) |
					@Html.ActionLink("Details", "Details", new { /* id=item.PrimaryKey */ }) |
					@Html.ActionLink("Delete", "Delete", null, null, new { @onclick = "DeleteFile(" + @item.FileId + ")", @href = "#" })
					@*<a href="#" class="btn btn-danger" onclick="DeleteFile('@item.FileId')">Delete</a>*@
				</td>
			</tr>
		}

	</table>

	@*Create a popup modal for delete confirmation*@
	<div class="modal fade" id="DeleteConfirmation">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h4 class="modal-title">Delete File</h4>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<h5>Are you sure you want to delete this file?</h5>
				</div>
				<div class="modal-footer">
					<a href="#" class="btn btn-primary" onclick="ConfirmDelete()">Confirm</a>
					<a href="#" class="btn btn-secondary" data-dismiss="modal">Cancel</a>
				</div>
			</div>
		</div>
	</div>
</div>


@section Scripts {
	@Scripts.Render("~/bundles/jqueryval")
<script src="~/Scripts/MyScripts/DeleteFile.js"></script>
}

